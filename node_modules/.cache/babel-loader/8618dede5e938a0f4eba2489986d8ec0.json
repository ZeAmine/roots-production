{"ast":null,"code":"import axios from \"axios\";\nconst tokenURL = window.location.href;\nexport const accessToken = tokenURL.substring(29);\nlocalStorage.setItem(\"userToken\", accessToken == null ? \"error\" : accessToken);\nconst params = {\n  id: \"1DgBVE3lCnC7Osg9zpAt6N\"\n};\nexport const getUserInfos = async () => {\n  try {\n    const res = await axios.get(`https://roots.tinker.ovh/getUserInfos`, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`\n      }\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"error\", error);\n    return {\n      id: 0,\n      userId: \"fail\",\n      username: \"fail\",\n      userImageUrl: \"fail\",\n      alreadyVoted: false\n    };\n  }\n};\nexport const getVote = async () => {\n  try {\n    const res = await axios.put(`https://roots.tinker.ovh/vote`, params, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`\n      }\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"error\", error);\n    return {\n      vote: \"fail\"\n    };\n  }\n};\nexport const getArtist = async () => {\n  try {\n    const res = await axios.put(`https://roots.tinker.ovh/getArtist`, params, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`\n      }\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"error\", error);\n    return {\n      id: 0,\n      artistId: \"fail\",\n      artistName: \"fail\",\n      artistImgUrl: \"fail\",\n      artistFollowers: 0,\n      artistPopularity: 0,\n      artistVotes: 0\n    };\n  }\n}; // export const getCards = async (): Promise<ICards> => {\n//   try {\n//     const res = await axios.get(`${process.env.REACT_APP_BASE_URL2}/data.json`);\n//     return res.data;\n//   } catch (error) {\n//     console.error(\"error\", error);\n//     return { title: \"fail\", items: [], urlSuffixe: \"http://error\" };\n//   }\n// };","map":{"version":3,"sources":["/Users/elise/jeuPy/roots-production/src/api/index.ts"],"names":["axios","tokenURL","window","location","href","accessToken","substring","localStorage","setItem","params","id","getUserInfos","res","get","headers","Authorization","data","error","console","userId","username","userImageUrl","alreadyVoted","getVote","put","vote","getArtist","artistId","artistName","artistImgUrl","artistFollowers","artistPopularity","artistVotes"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAjC;AACA,OAAO,MAAMC,WAAW,GAAGJ,QAAQ,CAACK,SAAT,CAAmB,EAAnB,CAApB;AACPC,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCH,WAAW,IAAI,IAAf,GAAsB,OAAtB,GAAgCA,WAAlE;AAEA,MAAMI,MAAM,GAAG;AAAEC,EAAAA,EAAE,EAAE;AAAN,CAAf;AAEA,OAAO,MAAMC,YAAY,GAAG,YAA4B;AACtD,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAW,uCAAX,EAAmD;AACnEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASV,WAAY;AAD9B;AAD0D,KAAnD,CAAlB;AAKA,WAAOO,GAAG,CAACI,IAAX;AACD,GAPD,CAOE,OAAOC,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,OAAd,EAAuBA,KAAvB;AACA,WAAO;AACLP,MAAAA,EAAE,EAAE,CADC;AAELS,MAAAA,MAAM,EAAE,MAFH;AAGLC,MAAAA,QAAQ,EAAE,MAHL;AAILC,MAAAA,YAAY,EAAE,MAJT;AAKLC,MAAAA,YAAY,EAAE;AALT,KAAP;AAOD;AACF,CAlBM;AAoBP,OAAO,MAAMC,OAAO,GAAG,YAA4B;AACjD,MAAI;AACF,UAAMX,GAAG,GAAG,MAAMZ,KAAK,CAACwB,GAAN,CAAW,+BAAX,EAA2Cf,MAA3C,EAAmD;AACnEK,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASV,WAAY;AAD9B;AAD0D,KAAnD,CAAlB;AAKA,WAAOO,GAAG,CAACI,IAAX;AACD,GAPD,CAOE,OAAOC,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,OAAd,EAAuBA,KAAvB;AACA,WAAO;AAAEQ,MAAAA,IAAI,EAAE;AAAR,KAAP;AACD;AACF,CAZM;AAcP,OAAO,MAAMC,SAAS,GAAG,YAA8B;AACrD,MAAI;AACF,UAAMd,GAAG,GAAG,MAAMZ,KAAK,CAACwB,GAAN,CAAW,oCAAX,EAAgDf,MAAhD,EAAwD;AACxEK,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASV,WAAY;AAD9B;AAD+D,KAAxD,CAAlB;AAKA,WAAOO,GAAG,CAACI,IAAX;AACD,GAPD,CAOE,OAAOC,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAc,OAAd,EAAuBA,KAAvB;AACA,WAAO;AACLP,MAAAA,EAAE,EAAE,CADC;AAELiB,MAAAA,QAAQ,EAAE,MAFL;AAGLC,MAAAA,UAAU,EAAE,MAHP;AAILC,MAAAA,YAAY,EAAE,MAJT;AAKLC,MAAAA,eAAe,EAAE,CALZ;AAMLC,MAAAA,gBAAgB,EAAE,CANb;AAOLC,MAAAA,WAAW,EAAE;AAPR,KAAP;AASD;AACF,CApBM,C,CAsBP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from \"axios\";\nimport { ICards, IUser, IVote, IArtist } from \"../decl\";\n\nconst tokenURL = window.location.href;\nexport const accessToken = tokenURL.substring(29);\nlocalStorage.setItem(\"userToken\", accessToken == null ? \"error\" : accessToken);\n\nconst params = { id: \"1DgBVE3lCnC7Osg9zpAt6N\" };\n\nexport const getUserInfos = async (): Promise<IUser> => {\n  try {\n    const res = await axios.get(`https://roots.tinker.ovh/getUserInfos`, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"error\", error);\n    return {\n      id: 0,\n      userId: \"fail\",\n      username: \"fail\",\n      userImageUrl: \"fail\",\n      alreadyVoted: false,\n    };\n  }\n};\n\nexport const getVote = async (): Promise<IVote> => {\n  try {\n    const res = await axios.put(`https://roots.tinker.ovh/vote`, params, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"error\", error);\n    return { vote: \"fail\" };\n  }\n};\n\nexport const getArtist = async (): Promise<IArtist> => {\n  try {\n    const res = await axios.put(`https://roots.tinker.ovh/getArtist`, params, {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.error(\"error\", error);\n    return {\n      id: 0,\n      artistId: \"fail\",\n      artistName: \"fail\",\n      artistImgUrl: \"fail\",\n      artistFollowers: 0,\n      artistPopularity: 0,\n      artistVotes: 0,\n    };\n  }\n};\n\n// export const getCards = async (): Promise<ICards> => {\n//   try {\n//     const res = await axios.get(`${process.env.REACT_APP_BASE_URL2}/data.json`);\n//     return res.data;\n//   } catch (error) {\n//     console.error(\"error\", error);\n//     return { title: \"fail\", items: [], urlSuffixe: \"http://error\" };\n//   }\n// };\n"]},"metadata":{},"sourceType":"module"}